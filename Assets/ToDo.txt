code improvement: make the gridmap stuff reparentable...  meaning like i can put a gridmap 2 or 3 down from the actual gridmap and it'll still get the correct ref.  
- allows them all to be organized in a hierarchy

DO THESE:
---------

MUST:
-----
1) 
1) cleaning pollution uncovers resources - but only once
	- 
2) additional condition (e.g., nearby building) for harvesting win condition
3) central building to protect -- cleans seeds.  

4) early seeds let grow plants -- block early pollution.  
5) skills are collectible?
6) pollution has higher types
7) if pollution covers main building, you lose



transform into building is an advanced skill

islands of pollution die or don't grow




def. need a better visualizer for when blocking exists.  the colors thing is helpful for knowing what type you need before, but you need to know when there is actually
a block in place.

i think we need to play around with the idea that the different buildings give you shapes that you have to align.  maybe the big blocker building gives you a wall that 
is 2-3 away from it.  then maybe plant and mushroom give you lines or corners.  actually yeah, plant gives you lines, mush gives you corners.  
in that case, we need to make a lot of things -- visualizers for the resulting effect area, shapes for the effect area.  and a way to select the shapes.  

- i'm not sure i should start with the below stuff.  i think there needs to be something more basic that should be fixed, without just "adding stuff."

let's try JUST the blocker idea -- make some unlimited mushrooms and plants, make the unlimited spawner building spawn guys next to itself

- first: add the system that randomly spawns mushrooms and plant seeds on the map when you clean pollution.  
- maybe it's the cleaning stat that allows one to grow into a tree -- i think this makes sense. -- implement it this way.
- add an info panel for the unit you clicked on
-dynamically changing pollution grow speed based on number of pollution-free squares? -- that's a cool way to make the game harder as you go along

- pollution spawning on top of you feels randomly bad.  it would be nice to have a warning.  i think this is easy to implement -- when we decide to spawn the pollution in, 
just do it with a delay, add a visual component that indicates it's coming in.  maybe it blinks, blink speed increases as pollution is more imminent.
- warning for when you're getting damaged
- when clicking a square, alternate through the guys there



-pollution cleaning happens from adjacent square.
"digging through the pollution" seems like it could actualy be fun.  however, it seems too easy.  ESPECIALLY with the heal mechanic.  let's delete it.
even without heal mechanic, it's too easy to dig through the pollution.
- need to refactor the unitactioncontextclick
- the guys can be at the same spot -- probably want to avoid that (reserve the spot)
- ok even with a greatly slowed pollution cleaning speed, this isn't that hard.  although tbh, this is likely bc i changed it to where they don't have to clean from
the pollution square.
- now the threat is that the pollution closes in on them.  but given enuogh free space, this is pretty unlikely to happen while they are cleaning enough pollution to get
to the goal.
-maybe change the pollution free spots debug thing into a real thing. make the normal "free" squares yellow, but add a red one for when pollution is imminent.

so once we work out this cleaning thing, i think we can think about trying to establish a perimeter.  in addition, we can have the effects we've already talked 
about spawn in.

- need to fix the movement/adjacency stuff.  units shouldn't be able to stand on each other.  this is kind of a complicated thing to fix -- need to create a reserved tile
list and then add all reserved tiles into the pathfinder obstacles

so again the problem is making cleaning the pollution a challenge, but a surmountable one.

- might need to fix movement in general.  take it out of the "actions" class and make it its own thing.   this will be a pretty big refactor.  considering it's not necessary
(now) for gameplay, let's wait to do this until later

idea: always spawn the goal things one close, one medium distance, one far.  far one will obv be the hardest to get to.

possible solutions:
- make the pollution hurt more
- make cleaned pollution respawn faster
- make cleaning much weaker --> this might be a pretty good answer


place mushroom on dead tree --> grow more mushrooms.
can then harvest them and re plant them

also, add the fact that the buildings require stats
have a stats panel for the units
need a progress bar for EVERYTHING.  

- need to make the pollution sources as buildings.
- pollution source manager
- game state manager w/ win/loss
- game state manager checks pollution source manager

- probably, should figure out how to have actors interact with objects in an adjacent tile
- don't allow right-click interaction with yourself

delay when pollution is cleaned, for coming back.  could easily implement with a float array in pollutionmanager

??make some set of spawning buildings.  healer(maybe), pollution blocker, cleaner, planter.  

??links between trees can improve the total number you can build.  


THEN, do the root system and stat spreading system.  maybe do it simply first -- on/off, then can work on math.  so trees have certain ability, can spread thru roots

need the root system and stat spreading system.



add the "attach mushroom" --> 

pollution disables buildings --> even buildings that block pollution.  so need to clean them off
definitely thinking that health regen is better than the heal ability.  maybe we could use the heal ability at some point but not now
add pausing.
visualize current actions for units.

this next:
pollution block visualizer, tile set -- toggle to turn it on/off.  keep the script on for update, just disable the visualizer.
make the mechanism to attach the mushroom to a tree.



bug: should refuse to do an action if there is one that cannot be done...  some complexity required here, come back and think abotu it.

DO THIS NEXT
need the multiple pollution block system w/ three diff types blocking diff pollution.  tree, plant, s/t else.
what is the third thing?  i like the idea of trees that you grow into and plants that you plant, but i'd like a 3rd one...
need a good visualizer for this.

third thing is -- mushroom attached to a tree.  it'll make the aura from tree "full."  could have the mushroom aura size grow over time (?)





asperite sprite editor

need terrain generation

maybe units auto-heal when away from pollution. i think this would make it much less annoying to deal w the pollution
instead of dying right away, units get debilitated and can limp back but if in that state too long, will die.


i think once we have the above, things will be looking fairly decent.  you pick up seeeds, do things, turn into trees, rescue spirits, block pollution.

best... just don't have the button if can't do it.




idea: cleaning pollution stat brings you a building for cleaning pollution off things (seeds)

idea: cleaning pollution stat --> pollution blocking radius on buildings.
idea: when you clean pollution, you can pick up items.  why don't we implement pickupable items?
idea: the items can be seeds.  seeds will make small plants.  planting can lead to a building that spawns plants by itself.

idea: grow plants by operating them.  with trees, this grows the root system, which also happens to grow by itself.
idea: seeds
idea: mushrooms decompose the dead trees

idea: buildings take on the stats of the unit that creates them
      two abilities: one as a unit, one as a building
      abilities spread through the root networks

idea: pollution sources.  find it, "research it," clean it
idea: each kind of growth (tree, plant, s/t else?) contributes a max percent to Blocking pollution so that for full block, you need a diversity of things.

idea: trees can have pollution of varying severity/difficulty to clean up.  better units are harvested from more polluted trees.

idea: overall goal: clean up all pollution, including sources

lose when all your guys die.  win when all pollution sources are cleaned.


add an extension method to get perimeter positions (external and internal) for a RectInt

bugs: various bugs with actor unit components not resetting state when new object pool is obtainedtry to figure this out... 

idea: healing building
idea: block pollution building only slows it, not totally blocks it.
idea: something with water -- build bridges (how?).  walk on water?  clean pollution on water?
idea: rather than just a general map with pollution, etc., how about pollution sources?  --> can clean them?
	sub-idea: some pollution sources are just normal ones.  others are maybe sources from like human buildings or w/e
idea: underground "streams" of pollution?  cause pollution to pop up under your stuff?
idea: different types of pollution.  e.g., appliances, sludge, nuclear stuff.  different ways to clean it up
idea: harvested units have randomized stats

idea: pollution is of different kids, different stat values, so that dealing with it requires some thought.
idea: improved blocker ability (increased range).
idea: mycorrhizal networks
idea: mycorrhizal filament

--> not sure about the whole "fighting humans" thing.  might be better if we just forego that type of conflict altogether.
problem: healing and getting damaged is kind of boring, can become really annoying after playing for a little while.  
problem: automate a lot of things?


idea: pipe to send pollution out to human settlements
idea: mobile enemies?  loggers?  exterminators?
idea: spawn things like mosquitos to fend off humans.  maybe can be done by creating a pool of standing water.
idea: spawn animals to create diseases to fend off humans.

what do the above do?  maybe growing networks result in better research.  they function as the "brain" of the forest.  i like this idea.
maybe trees grow their roots over time.  can have roots get close to roots of other trees, and maybe you can connect them or maybe they do that automatically?
i think growing roots should be a user action -- like operate.  
when you get to a certain growth, you can choose a technology.  

need a number of threats.  of course encroaching pollution is a constant threat.  other threats would be good.
need other actions besides growing trees, cleaning pollution.  



if you can make a heal building... why not just make a blocking building?  healing building has a fixed range but you need an extra actor unit.
well, partly... you can bring the actor unit back...  but still why have to do it all actively when you can do it passively...

have a text effects static class that just spawns floating/moving text effects for feedback (e.g., skill gains).

heal tree w heal aura


idea: threat meter, warning meter.  more you do, higher it goes, threats get worse.
add: error/status messages in game.

win/loss conditions

new mouse tools - ??

interface showing number of units
interface showing unit abilities
abilities with cooldowns.  e.g., prevent pollution pain, prevent pollution spread.  maybe clear all pollution in a certain area...  
since cleaning pollution will be such a big part of the game, i think we need to reduce the number of clicks necessary.  we can go with the "Traditional" method of 
removing control of individual units and just designating orders for parts of the map.  but i think an intermediate method of allowing dragged rectangles for cleaning would be best.  try it out and see if not.

i can definitely see why the "traditional" method is appealing -- selecting different units and clicking with them is very tedious.

there are other possible solutions, though... you could just have each of the guys have side icons that maybe even indicate what they're doing, and then click on those icons
to subsequently set orders.

IDEA: you have to search for pollution sources to uncover them.

ok it's annoying that i can't clean the pollution on water... but maybe i can use that as a motivation...
upgrade: unit prevent pollution spawn aura

then i need to implement map changes (traversible) on build buildings and on change terrain (terrain can be deferred)

idea: 

again, eventually, try to clean all pollution on map

eventually, add higher level of pollution.  maybe this spreads more slowly but is harder to clear.


change color as they become more experienced (to prevent people from turning their really good ones into buildings)

go/build on water (to clean pollution)...

gameplay: cleaning up pollution gives a block pollution ability.  choice is whether to focus all cleaning on one guy, thus improving stat or let all guys clean.  

-------------------------------------------

- the units can hit a button to hold position and keep the pollution at bay.  this prevents pollution from spawning in a certain area around the unit.  the unit will gain
pollution stoppage skill while doing this.
- the units can also clean the pollution, which we've already implemented.
if the pollution starts out covering the entire field (or most of it), then it makes sense to try to get multiple units in -- some cleaning and some keeping the pollution at bay, and then having one of them make a "stay at bay" building and one make a "spawn" building.
- do the above as a base, core mechanic.  goal is to clear the field.

idea--> level 2 pollution -- maybe slower spreading... but need to upgrade yourselves to clean it/keep it at bay.

idea--> you can build an area -- the area defines how many units you can have.  

so you win if there is no pollution left in the whole level.




- in addition to cleaning pollution, need to terraform (e.g., remove water/whatever...) (???) --> i don't' think this meshes with the flavor of "cleaning" the forest.  except maybe something like restoring bodies of water.

//cancels for actions... ok but not necessary right now.
if any action cannot happen, the entire queue should get dropped.

pixel art: https://www.reddit.com/r/IndieGaming/comments/msfjpe/hello_i_am_a_pixel_artist_that_goes_by_the_name/
https://opengameart.org/content/swamp-2d-tileset-pixel-art
